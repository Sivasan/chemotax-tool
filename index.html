<!DOCTYPE html>
<html lang="en" class="h-full bg-gray-50">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Genome-Resolved Chemotaxonomy</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <style>
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    .spinner { animation: spin 1s linear infinite; }
    #file-list::-webkit-scrollbar { display: none; }
    #file-list { -ms-overflow-style: none; scrollbar-width: none; }
    details > summary::-webkit-details-marker { display:none; }
  </style>
  <script>
    function chemotaxApp() {
      const guessFormat = (name='') => {
        const n = name.toLowerCase();
        if (n.endsWith('.gff3') || n.endsWith('.gff')) return 'gff3';
        if (n.endsWith('.gbk') || n.endsWith('.gbff')) return 'gbk';
        if (n.includes('bakta') && n.endsWith('.tsv')) return 'bakta';
        if (n.includes('dram') && (n.endsWith('.tsv') || n.endsWith('.csv'))) return 'dram';
        if (n.endsWith('.tblout') || n.includes('hmmer') || n.endsWith('.hmm')) return 'hmm';
        if (n.includes('rast') && n.endsWith('.tsv')) return 'rast';
        if (n.endsWith('.tsv')) return 'tsv';
        return '';
      };

      const dispositionName = (cd, fallback) => {
        if (!cd) return fallback;
        const star = cd.match(/filename\*\s*=\s*[^']*'[^']*'([^;]+)/i);
        if (star) return decodeURIComponent(star[1]);
        const quoted = cd.match(/filename\s*=\s*"([^"]+)"/i);
        if (quoted) return quoted[1];
        const bare = cd.match(/filename\s*=\s*([^;]+)/i);
        if (bare) return bare[1].trim();
        return fallback;
      };

      const PHYLUM_OPTIONS = [
        {label:'Proteobacteria (Pseudomonadota)', value:'Proteobacteria'},
        {label:'Actinobacteria (Actinobacteriota)', value:'Actinobacteria'},
        {label:'Firmicutes (Bacillota)', value:'Firmicutes'},
        {label:'Bacteroidetes (Bacteroidota)', value:'Bacteroidetes'},
        {label:'Cyanobacteria', value:'Cyanobacteria'},
        {label:'Chloroflexi (Chloroflexota)', value:'Chloroflexi'},
        {label:'Corynebacteriales (order)', value:'Corynebacteriales'},
      ];

      return {
        files: [],
        // Free-text fallback AND a multi-select:
        phylum: '',
        phylumSel: [],
        showPhylumMenu: false,
        PHYLUM_OPTIONS,

        isLoading: false,
        isDownloading: false,
        useAI: false,
        error: null,
        results: null,
        apiBaseUrl: '/api',

        handleFileSelect(event) {
          this.error = null;
          this.results = null;
          const picked = Array.from(event.target.files).map(file => ({
            fileObject: file,
            name: file.name,
            size: file.size,
            format: guessFormat(file.name)
          }));
          this.files = [...this.files, ...picked];
          event.target.value = null;
        },
        removeFile(index) { this.files.splice(index, 1); },

        selectedPhylumString() {
          // Multi-select takes precedence; fallback to free-text
          return this.phylumSel.length ? this.phylumSel.join(', ') : (this.phylum || '');
        },

        async submitAnalysis() {
          this.isLoading = true;
          this.error = null;
          this.results = null;

          if (this.files.length === 0) {
            this.error = 'Please add at least one file.';
            this.isLoading = false; return;
          }
          if (this.files.some(f => !f.format)) {
            this.error = 'Please select a format for every file.';
            this.isLoading = false; return;
          }

          const formData = new FormData();
          this.files.forEach(f => {
            formData.append('files', f.fileObject, f.name);
            formData.append('formats', f.format);
          });
          formData.append('phylum', this.selectedPhylumString());

          try {
            const response = await fetch(this.apiBaseUrl + '/analyze-multi', { method: 'POST', body: formData });
            if (!response.ok) {
              let msg = `Server error: ${response.status}`;
              try { const errData = await response.json(); if (errData?.error) msg = errData.error; } catch(e){}
              throw new Error(msg);
            }
            this.results = await response.json();
          } catch (err) {
            this.error = `Analysis failed: ${err.message}`;
            console.error(err);
          } finally {
            this.isLoading = false;
          }
        },

        async downloadReport(format) {
          this.isDownloading = true;
          this.error = null;

          if (this.files.length === 0) {
            this.error = 'Please add files before downloading a report.';
            this.isDownloading = false; return;
          }
          if (this.files.some(f => !f.format)) {
            this.error = 'Please select a format for every file.';
            this.isDownloading = false; return;
          }

          const formData = new FormData();
          this.files.forEach(f => {
            formData.append('files', f.fileObject, f.name);
            formData.append('formats', f.format);
          });
          formData.append('phylum', this.selectedPhylumString());
          formData.append('use_ai', this.useAI);

          try {
            const response = await fetch(`${this.apiBaseUrl}/analyze-and-report?format=${encodeURIComponent(format)}`, {
              method: 'POST', body: formData
            });
            if (!response.ok) {
              let msg = `Server error: ${response.status}`;
              try { const errData = await response.json(); if (errData?.error) msg = errData.error; } catch(e){}
              throw new Error(msg);
            }
            const blob = await response.blob();
            const cd = response.headers.get('content-disposition');
            const filename = dispositionName(cd, `chemotax_report.${format}`);

            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url; a.download = filename;
            document.body.appendChild(a); a.click(); a.remove();
            URL.revokeObjectURL(url);
          } catch (err) {
            this.error = `Report download failed: ${err.message}`;
            console.error(err);
          } finally {
            this.isDownloading = false;
          }
        }
      };
    }
  </script>
</head>
<body class="h-full font-sans text-gray-800">
  <div x-data="chemotaxApp()" class="min-h-screen p-4 md:p-8 bg-gray-50">
    <div class="max-w-6xl mx-auto">
      <!-- Header -->
      <header class="mb-8 p-6 bg-white rounded-xl shadow-sm border border-gray-200">
        <div class="flex flex-col md:flex-row justify-between items-center">
          <div>
            <h1 class="text-3xl font-bold text-gray-900">Genome-Resolved Chemotaxonomy</h1>
            <p class="mt-1 text-lg text-gray-600">Analyze genome annotations to predict chemotaxonomic markers.</p>
          </div>
          <svg class="w-16 h-16 text-blue-600 mt-4 md:mt-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" d="M11.35 3.836c-.065.22-.1.448-.1.684 0 .414.04.818.115 1.206l-1.64 1.64a.25.25 0 00-.06.177l-.096 1.123a.25.25 0 01.059.212l1.64 1.64a.25.25 0 00.177.06l1.123-.096a.25.25 0 00.212-.059l1.64-1.64c.388.075.792.115 1.206.115.236 0 .464-.035.684-.1l1.64-1.64a.25.25 0 00.06-.177l.096-1.123a.25.25 0 00-.059-.212l-1.64-1.64a.25.25 0 00-.177-.06l-1.123.096a.25.25 0 00-.212.059L12 3.951l-.65-.115z"/>
            <path stroke-linecap="round" stroke-linejoin="round" d="M17.589 15.006l-2.05 2.05a.25.25 0 01-.353 0l-.096-.096a.25.25 0 010-.353l2.05-2.05a.25.25 0 01.353 0l.096.096a.25.25 0 010 .353z"/>
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.006 17.589l-2.05 2.05a.25.25 0 01-.353 0l-.096-.096a.25.25 0 010-.353l2.05-2.05a.25.25 0 01.353 0l.096.096a.25.25 0 010 .353z"/>
            <path stroke-linecap="round" stroke-linejoin="round" d="M12.422 20.172l-2.05 2.05a.25.25 0 01-.353 0l-.096-.096a.25.25 0 010-.353l2.05-2.05a.25.25 0 01.353 0l.096.096a.25.25 0 010 .353z"/>
            <path stroke-linecap="round" stroke-linejoin="round" d="M19.75 10.25c.236 0 .464.035.684.1l1.64 1.64a.25.25 0 01.06.177l.096 1.123a.25.25 0 01-.059.212l-1.64 1.64a.25.25 0 01-.177.06l-1.123-.096a.25.25 0 01-.212-.059l-1.64-1.64c-.388-.075-.792-.115-1.206-.115-.236 0-.464.035-.684.1l-1.64 1.64a.25.25 0 01-.06.177l-.096 1.123a.25.25 0 01-.059.212l-1.64 1.64a.25.25 0 01-.177.06l-1.123-.096a.25.25 0 01-.212-.059L3.95 19.75l-.115.65c-.065.22-.1.448-.1.684 0 .414.04.818.115 1.206l-1.64 1.64a.25.25 0 01-.06.177l-.096 1.123a.25.25 0 01.059.212l1.64 1.64a.25.25 0 01.177.06l1.123-.096a.25.25 0 01.212-.059l1.64-1.64c.388.075.792.115 1.206.115.236 0 .464-.035.684-.1l1.64-1.64a.25.25 0 01.06-.177l.096-1.123a.25.25 0 01-.059-.212l-1.64-1.64a.25.25 0 00-.177-.06l-1.123.096a.25.25 0 00-.212-.059l-1.64 1.64c-.388.075-.792-.115-1.206-.115-.236 0-.464.035-.684-.1l-1.64-1.64a.25.25 0 00-.06-.177l-.096-1.123a.25.25 0 00-.059-.212l1.64-1.64a.25.25 0 00.177-.06l1.123.096a.25.25 0 00.212-.059L19.75 10.25z"/>
          </svg>
        </div>
      </header>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <!-- Left Column -->
        <div class="lg:col-span-1 space-y-6">
          <form @submit.prevent="submitAnalysis()" id="upload-form" class="p-6 bg-white rounded-xl shadow-sm border border-gray-200">
            <!-- Files -->
            <div>
              <label class="block text-sm font-medium text-gray-700">1. Add Annotation Files</label>
              <div class="mt-2 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg">
                <div class="space-y-1 text-center">
                  <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                    <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.5-3.5M28 8v8h8m-4-4H12" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  <p class="text-sm text-gray-600">
                    <label for="file-upload" class="relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500">
                      <span>Click to upload</span>
                      <input id="file-upload" name="files" type="file" class="sr-only" multiple
                             accept=".gff,.gff3,.gbk,.gbff,.tsv,.tblout,.hmm,.csv"
                             @change="handleFileSelect">
                    </label>
                  </p>
                  <p class="text-xs text-gray-500">GFF3, RAST, DRAM, HMM, GBK, TSV</p>
                </div>
              </div>
            </div>

            <!-- File List -->
            <template x-if="files.length > 0">
              <div class="mt-4 space-y-3 max-h-60 overflow-y-auto" id="file-list">
                <template x-for="(file, index) in files" :key="index">
                  <div class="flex items-center p-3 bg-gray-50 rounded-lg border border-gray-200">
                    <div class="flex-1 min-w-0">
                      <p class="text-sm font-medium text-gray-800 truncate" x-text="file.name"></p>
                      <p class="text-xs text-gray-500" x-text="(file.size/1024).toFixed(1)+' KB'"></p>
                    </div>
                    <div class="ml-3">
                      <select x-model="file.format" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm text-xs">
                        <option value="">Select Format</option>
                        <option value="gff3">GFF3 (Prokka)</option>
                        <option value="gbk">GenBank (GBK)</option>
                        <option value="rast">RAST (TSV)</option>
                        <option value="bakta">Bakta (TSV)</option>
                        <option value="dram">DRAM (TSV)</option>
                        <option value="hmm">HMMER (tblout)</option>
                        <option value="tsv">Generic TSV</option>
                      </select>
                    </div>
                    <button @click="removeFile(index)" type="button" class="ml-2 p-1 text-gray-400 hover:text-gray-600" title="Remove">
                      <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                      </svg>
                    </button>
                  </div>
                </template>
              </div>
            </template>

            <!-- Phylum Filter (Multi-select + Free-text) -->
            <div class="mt-6 space-y-2">
              <label class="block text-sm font-medium text-gray-700">2. Phylum Filter (Optional)</label>

              <!-- Multi-select menu -->
              <details class="relative">
                <summary class="cursor-pointer select-none w-full rounded-md border border-gray-300 py-2 px-3 text-left bg-white">
                  <span class="text-sm text-gray-700">
                    <template x-if="phylumSel.length === 0">Select phylaâ€¦</template>
                    <template x-if="phylumSel.length > 0"><span x-text="phylumSel.join(', ')"></span></template>
                  </span>
                </summary>
                <div class="absolute z-10 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg max-h-56 overflow-y-auto">
                  <div class="p-2 space-y-1">
                    <template x-for="opt in PHYLUM_OPTIONS" :key="opt.value">
                      <label class="flex items-center space-x-2 text-sm px-2 py-1 rounded hover:bg-gray-50 cursor-pointer">
                        <input type="checkbox" :value="opt.value" x-model="phylumSel" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                        <span x-text="opt.label"></span>
                      </label>
                    </template>
                  </div>
                </div>
              </details>

              <!-- Free-text fallback -->
              <input type="text" x-model="phylum" class="block w-full rounded-md border-gray-300 shadow-sm text-sm"
                     placeholder="Or type phyla: e.g., Proteobacteria, Actinobacteria">
              <p class="text-xs text-gray-500">You can pick from the list above, type your own, or combine both.</p>
            </div>

            <!-- Analyze -->
            <div class="mt-8 pt-5 border-t border-gray-200">
              <button :disabled="isLoading || files.length === 0"
                      type="submit"
                      class="w-full inline-flex justify-center items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50">
                <template x-if="isLoading">
                  <svg class="spinner w-5 h-5 mr-2 -ml-1 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                  </svg>
                </template>
                <span x-text="isLoading ? 'Analyzing...' : 'Analyze & View Results'"></span>
              </button>
            </div>
          </form>

          <!-- Download -->
          <div class="mt-6 p-6 bg-white rounded-xl shadow-sm border border-gray-200">
            <h3 class="text-lg font-medium text-gray-900">3. Download Report</h3>
            <p class="mt-1 text-sm text-gray-600">Download the full analysis as a formatted report.</p>

            <div class="mt-4 relative flex items-start">
              <div class="flex items-center h-5">
                <input id="ai-toggle" x-model="useAI" type="checkbox" class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded">
              </div>
              <div class="ml-3 text-sm">
                <label for="ai-toggle" class="font-medium text-gray-700">Use AI for enhanced report</label>
                <p class="text-gray-500">Generates a full narrative. (May be slower)</p>
              </div>
            </div>

            <div class="mt-5 pt-5 border-t border-gray-200 grid grid-cols-2 gap-3">
              <button @click="downloadReport('pdf')" :disabled="isDownloading || files.length === 0"
                      type="button"
                      class="w-full inline-flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50">
                <svg class="w-5 h-5 mr-2 -ml-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/></svg>
                Download .pdf
              </button>
              <button @click="downloadReport('docx')" :disabled="isDownloading || files.length === 0"
                      type="button"
                      class="w-full inline-flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50">
                <svg class="w-5 h-5 mr-2 -ml-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/></svg>
                Download .docx
              </button>
            </div>
          </div>
        </div>

        <!-- Right Column: Results (unchanged from your version) -->
        <div class="lg:col-span-2">
          <template x-if="error">
            <div class="p-4 bg-red-50 rounded-lg border border-red-300">
              <h3 class="text-lg font-medium text-red-800">Error</h3>
              <p class="mt-1 text-sm text-red-700" x-text="error"></p>
            </div>
          </template>

          <template x-if="isLoading">
            <div class="grid grid-cols-1 gap-6">
              <div class="p-6 bg-white rounded-xl shadow-sm border border-gray-200 animate-pulse"><div class="h-6 bg-gray-200 rounded-md w-1/3 mb-4"></div><div class="h-4 bg-gray-200 rounded-md w-1/2"></div></div>
              <div class="p-6 bg-white rounded-xl shadow-sm border border-gray-200 animate-pulse"><div class="h-6 bg-gray-200 rounded-md w-1/3 mb-4"></div><div class="h-4 bg-gray-200 rounded-md w-3/4 mb-2"></div><div class="h-4 bg-gray-200 rounded-md w-1/2"></div></div>
            </div>
          </template>

          <template x-if="results && !isLoading">
            <div class="space-y-6">
              <!-- Summary -->
              <div class="p-6 bg-white rounded-xl shadow-sm border border-gray-200">
                <h2 class="text-xl font-semibold text-gray-900">Analysis Summary</h2>
                <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div><span class="block text-sm text-gray-500">Input Files</span><span class="block text-lg font-medium text-gray-800" x-text="results.files.length"></span></div>
                  <div><span class="block text-sm text-gray-500">Total Features Parsed</span><span class="block text-lg font-medium text-gray-800" x-text="results.totalGenes"></span></div>
                  <div><span class="block text-sm text-gray-500">Phylum Filter</span><span class="block text-lg font-medium text-gray-800" x-text="results.phylum ? results.phylum.join(', ') : 'None'"></span></div>
                </div>
              </div>

              <!-- Predictions -->
              <div class="p-6 bg-white rounded-xl shadow-sm border border-gray-200">
                <h2 class="text-xl font-semibold text-gray-900">Chemotaxonomic Predictions</h2>
                <div class="mt-4 space-y-4">
                  <template x-if="results.predictions.length === 0"><p class="text-gray-600">No predictions met the required confidence threshold.</p></template>
                  <template x-for="prediction in results.predictions" :key="prediction.id">
                    <div class="p-4 border border-gray-200 rounded-lg">
                      <div class="flex justify-between items-center mb-1">
                        <h3 class="text-lg font-medium text-blue-700" x-text="prediction.name"></h3>
                        <span class="px-2 py-0.5 rounded-full text-sm font-medium"
                              :class="{'bg-green-100 text-green-800': prediction.confidence >= 70, 'bg-yellow-100 text-yellow-800': prediction.confidence >= 30 && prediction.confidence < 70, 'bg-red-100 text-red-800': prediction.confidence < 30}"
                              x-text="`${prediction.confidence}% Conf.`"></span>
                      </div>
                      <p class="text-sm text-gray-600 italic" x-text="`IJSEM Note: ${prediction.ijsem}`"></p>
                      <p class="mt-2 text-sm text-gray-700"><span class="font-medium">Matched Markers:</span> <span x-text="prediction.matchedMarkers.join(', ')"></span></p>
                    </div>
                  </template>
                </div>
              </div>

              <!-- Marker Findings -->
              <div class="p-6 bg-white rounded-xl shadow-sm border border-gray-200">
                <h2 class="text-xl font-semibold text-gray-900">Marker Findings</h2>
                <div class="mt-4 space-y-5">
                  <template x-if="Object.keys(results.foundMarkers).length === 0"><p class="text-gray-600">No markers were found matching the database.</p></template>
                  <template x-for="category in Object.keys(results.foundMarkers)" :key="category">
                    <div class="space-y-3">
                      <h3 class="text-lg font-semibold text-gray-800" x-text="results.foundMarkers[category].name"></h3>
                      <div class="space-y-4">
                        <template x-for="subcategory in Object.keys(results.foundMarkers[category].subcategories)" :key="subcategory">
                          <div class="p-3 bg-gray-50 rounded-md border border-gray-200">
                            <div class="flex justify-between items-center text-sm">
                              <span class="font-medium text-gray-700" x-text="subcategory"></span>
                              <span class="text-gray-600" x-text="`${results.foundMarkers[category].subcategories[subcategory].percentage}% (${results.foundMarkers[category].subcategories[subcategory].found.length} / ${results.foundMarkers[category].subcategories[subcategory].total})`"></span>
                            </div>
                            <div class="mt-2 w-full bg-gray-200 rounded-full h-2.5">
                              <div class="bg-blue-600 h-2.5 rounded-full" :style="`width: ${results.foundMarkers[category].subcategories[subcategory].percentage}%`"></div>
                            </div>
                          </div>
                        </template>
                      </div>
                    </div>
                  </template>
                </div>
              </div>

              <!-- Notable Features -->
              <div class="p-6 bg-white rounded-xl shadow-sm border border-gray-200">
                <h2 class="text-xl font-semibold text-gray-900">Notable Features</h2>
                <div class="mt-4 space-y-3">
                  <template x-if="results.novelFeatures.length === 0"><p class="text-gray-600">No features flagged at current thresholds.</p></template>
                  <template x-for="feature in results.novelFeatures" :key="feature.type">
                    <div class="p-4 border border-gray-200 rounded-lg">
                      <h3 class="font-medium text-gray-800" x-text="feature.type"></h3>
                      <p class="text-sm text-gray-600" x-text="feature.description"></p>
                      <ul class="mt-2 list-disc list-inside space-y-1 text-sm">
                        <template x-for="item in feature.features" :key="item.subcategory">
                          <li x-text="`${item.category} / ${item.subcategory}: ${item.percentage}%`"></li>
                        </template>
                      </ul>
                    </div>
                  </template>
                </div>
              </div>
            </div>
          </template>
        </div>
      </div>

    </div>
  </div>
</body>
</html>
